<ProbingPopup>:
    size_hint: 0.5, 0.4
    pos_hint: {"right": 0.75, "top": 0.7}
    auto_dismiss: False
    cb_invert_probe: cb_invert_probe
    txt_x: txt_x
    txt_y: txt_y
    txt_z: txt_z
    txt_a: txt_a
    TabbedPanel:
        do_default_tab: False
        tab_width: root.width / 2 - dp(2)
        TabbedPanelItem:
            text: tr._('Straight Probe (G38.x)')
            BoxLayout:
                padding: '15dp'
                orientation: 'vertical'
                BoxLayout:
                    size_hint_y: None
                    height: '28dp'
                    Label:
                        text: tr._('X: ')
                        halign: "center"
                        valign: "middle"
                        text_size: self.size
                        size_hint_x: 0.3

                    TextInput:
                        id: txt_x
                        hint_text: tr._('X')
                        multiline: False
                        text: ''
                        input_type: 'number'
                        input_filter: 'float'
                        focus: True
                    Label:
                        text: tr._('Y:')
                        halign: "left"
                        valign: "middle"
                        text_size: self.size
                        size_hint_x: 0.3

                    TextInput:
                        id: txt_y
                        hint_text: tr._('Y')
                        multiline: False
                        text: ''
                        input_type: 'number'
                        input_filter: 'float'

                    Label:
                        text: tr._('Z:')
                        halign: "left"
                        valign: "middle"
                        text_size: self.size
                        size_hint_x: 0.3
                    TextInput:
                        id: txt_z
                        hint_text: tr._('Z')
                        multiline: False
                        text: ''
                        input_type: 'number'
                        input_filter: 'float'

                    Label:
                        text: tr._('A:')
                        halign: "left"
                        valign: "middle"
                        text_size: self.size
                        size_hint_x: 0.3
                    TextInput:
                        id: txt_a
                        hint_text: tr._('A')
                        multiline: False
                        text: ''
                        input_type: 'number'
                        input_filter: 'float'
                BoxLayout:
                    size_hint_y: None
                    height: '50dp'

                    MCQCheckBox:
                        id: cb_invert_probe
                        group: 'anchor'
                        active: False
                    MCQLabel:
                        on_press: cb_invert_probe._do_press()
                        text: tr._('Invert Probe')
                    # Label:
                BoxLayout:
                    id: empty
                    Label:
                        halign: "left"
                        valign: "middle"
                        text_size: self.size
                        text: tr._('Note: Use Invert probe if your probe is NC (normally closed).')
                        color: 52/255, 152/255, 219/255, 1

                BoxLayout:
                    spacing: '5dp'
                    size_hint_y: None
                    height: '40dp'
                    Button:
                        id: btn_close
                        text: tr._('Close')
                        on_release: root.dismiss()
                    Button:
                        id: btn_ok
                        text: tr._('Start')
                        on_release:
                            root.coord_popup.set_config('probing', 'invert_probe', root.shouldInvertProbe())
                            root.coord_popup.set_config('probing', 'x', txt_x.text)
                            root.coord_popup.set_config('probing', 'y', txt_y.text)
                            root.coord_popup.set_config('probing', 'z', txt_z.text)
                            root.coord_popup.set_config('probing', 'a', txt_a.text)

                            app.root.startProbing(txt_x.text, txt_y.text, txt_z.text, txt_a.text, root.shouldInvertProbe())
                            #root.dismiss()