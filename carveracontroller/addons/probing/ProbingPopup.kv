
#:include addons/probing/tabs/ProbingTabs.kv
#:include addons/probing/tabs/ProbeSettingsTab.kv

<ProbingPopup>:
    title:"Probing"
    size_hint: 0.618, 0.6
    pos_hint: {"center_x": 0.5, "center_y": 0.5}
    auto_dismiss: False
#    cb_probe_normally_open: cb_probe_normally_open
#    cb_probe_normally_closed: cb_probe_normally_closed
#    probe_preview_label: probe_preview_label
#    txt_x: txt_x
#    txt_y: txt_y
#    txt_z: txt_z
#    txt_a: txt_a
    GridLayout:
        cols:1
        rows:2
        spacing: dp(10)
        padding: dp(3)
        GridLayout:
            cols:2
            rows:1
            spacing: dp(10)
            padding: dp(3)

            ProbingTabs:
            ProbeSettingsTab:

        BoxLayout:
            spacing: '5dp'
            size_hint_y: None
            height: '40dp'
            Button:
                id: btn_close
                text: tr._('Close')
                on_release: root.dismiss()
            Button:
                id: btn_ok
                text: tr._('Start')
                on_release:
                    root.coord_popup.set_config(ProbingConstants.config_section, ProbingConstants.probe_switch_type, root.get_probe_switch_type())
                    root.coord_popup.set_config(ProbingConstants.config_section, 'x', txt_x.text)
                    root.coord_popup.set_config(ProbingConstants.config_section, 'y', txt_y.text)
                    root.coord_popup.set_config(ProbingConstants.config_section, 'z', txt_z.text)
                    root.coord_popup.set_config(ProbingConstants.config_section, 'a', txt_a.text)

                    app.root.start_probing(txt_x.text, txt_y.text, txt_z.text, txt_a.text, root.get_probe_switch_type())
                    #root.dismiss()

