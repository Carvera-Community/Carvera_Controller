#:include addons/probing/preview/ProbingPreviewPopup.kv
#:include addons/probing/ProbingControls.kv
#:include addons/probing/operations/OutsideCorner/OutsideCornerSettings.kv
#:include addons/probing/operations/InsideCorner/InsideCornerSettings.kv
#:include addons/probing/operations/SingleAxis/SingleAxisProbeSettings.kv


<ProbingPopup>:
    title:"Probing"
    size_hint: 0.8, 0.8
    pos_hint: {"center_x": 0.5, "center_y": 0.5}
    auto_dismiss: False
    step_xy: step_xy
    step_z: step_z
    step_a: step_a

    GridLayout:
        cols:1
        rows:3
        spacing: dp(10)
        padding: dp(3)
        GridLayout:
            cols:2
            rows:2
            spacing: dp(10)
            padding: dp(3)

            TabbedPanel:
                do_default_tab: False
                tab_width: dp(111)
                TabbedPanelItem:
                    text: tr._('Outside Corners')
                    GridLayout:
                        cols:2
                        rows:1
                        size_hint:1, 1
                        spacing:dp(10)
                        padding:dp(10)
                        GridLayout:
                            size_hint_x: .5
                            cols: 2
                            rows: 2
                            spacing: dp(8)
                            padding: 10

                            ProbeButton:
                                on_press: root.on_outside_corner_probing_pressed("TopLeft")
                                image: 'addons/probing/data/icons_1024x768/outside_corner/X+Y-.png'
                            ProbeButton:
                                on_press: root.on_outside_corner_probing_pressed("TopRight")
                                image: 'addons/probing/data/icons_1024x768/outside_corner/X-Y-.png'
                            ProbeButton:
                                on_press: root.on_outside_corner_probing_pressed("BottomLeft")
                                image: 'addons/probing/data/icons_1024x768/outside_corner/X+Y+.png'
                            ProbeButton:
                                on_press: root.on_outside_corner_probing_pressed("BottomRight")
                                image: 'addons/probing/data/icons_1024x768/outside_corner/X-Y+.png'

                        BoxLayout:
                            size_hint_x: .5
                            OutsideCornerSettings:
                                id: outside_corner_settings

                TabbedPanelItem:
                    text: tr._('Inside Corners')
                    GridLayout:
                        cols:2
                        rows:1
                        size_hint:1, 1
                        spacing:dp(10)
                        padding:dp(10)
                        GridLayout:
                            size_hint_x: .5
                            cols: 2
                            rows: 2
                            spacing: dp(8)
                            padding: 10

                            ProbeButton:
                                on_press: root.on_inside_corner_probing_pressed("TopLeft")
                                image: 'addons/probing/data/icons_1024x768/inside_corner/inX+Y-.png'
                            ProbeButton:
                                on_press: root.on_inside_corner_probing_pressed("TopRight")
                                image: 'addons/probing/data/icons_1024x768/inside_corner/inX-Y-.png'
                            ProbeButton:
                                on_press: root.on_inside_corner_probing_pressed("BottomLeft")
                                image: 'addons/probing/data/icons_1024x768/inside_corner/inX+Y+.png'
                            ProbeButton:
                                on_press: root.on_inside_corner_probing_pressed("BottomRight")
                                image: 'addons/probing/data/icons_1024x768/inside_corner/inX-Y+.png'

                        BoxLayout:
                            size_hint_x: .5
                            InsideCornerSettings:
                                id: inside_corner_settings

                TabbedPanelItem:
                    text: tr._('Single Axis')
                    GridLayout:
                        cols:2
                        rows:1
                        size_hint:1, 1
                        spacing:dp(10)
                        padding:dp(10)

                        GridLayout:
                            size_hint_x: .5
                            cols: 3
                            rows: 3
                            spacing: dp(8)
                            padding: 10

                            EmptySpace:
                                #nothing

                            ProbeButton:
                                on_press: root.on_single_axis_probing_pressed("Top")
                                image: 'addons/probing/data/icons_1024x768/single_axis/Y-.png'

                            EmptySpace:
                                #nothing

                            ProbeButton:
                                on_press: root.on_single_axis_probing_pressed("Left")
                                image: 'addons/probing/data/icons_1024x768/single_axis/X+.png'

                            ProbeButton:
                                on_press: root.on_single_axis_probing_pressed("WorkpieceTop")
                                image: 'addons/probing/data/icons_1024x768/single_axis/Z-.png'

                            ProbeButton:
                                on_press: root.on_single_axis_probing_pressed("Right")
                                image: 'addons/probing/data/icons_1024x768/single_axis/X-.png'

                            EmptySpace:
                                #nothing

                            ProbeButton:
                                on_press: root.on_single_axis_probing_pressed("Bottom")
                                image: 'addons/probing/data/icons_1024x768/single_axis/Y+.png'

                            EmptySpace:
                                #nothing

                        BoxLayout:
                            size_hint_x: .5
                            SingleAxisProbeSettings:
                                id: single_axis_settings


        #jogging controls
        BoxLayout:
            spacing: '5dp'
            size_hint_y: None
            height: '100dp'
            GridLayout:
                cols:3
                rows:1
                size_hint:1, 1
                spacing:dp(10)
                padding:dp(10)

                #first column xy jogging
                GridLayout:
                    size_hint_x: .5
                    cols: 3
                    rows: 3
                    spacing: dp(8)
                    padding: 10

                    EmptySpace:
                        #nothing

                    JogButton:
                        text: "Y-"
                        on_release: root.controller.jog_with_speed("Y-{}".format(root.step_xy.text), app.root.jog_speed)

                    EmptySpace:
                        #nothing

                    JogButton:
                        text: "X-"
                        on_release: root.controller.jog_with_speed("X-{}".format(root.step_xy.text), app.root.jog_speed)


                    #center
                    GridBoxLayout:
                        Label:
                        Spinner:
                            id: step_xy
                            center: 0.5, 0.5
                            size: dp(33), dp(33)
                            size_hint: None, None
                            text: '10'
                            values: '10', '1', '0.1', '0.01', '0.005'
                        Label:

                    JogButton:
                        text: "X+"
                        on_release: root.controller.jog_with_speed("X{}".format(root.step_xy.text), app.root.jog_speed)

                    EmptySpace:
                        #nothing

                    JogButton:
                        text: "Y+"
                        on_release: root.controller.jog_with_speed("Y{}".format(root.step_xy.text), app.root.jog_speed)

                    EmptySpace:
                        #nothing

                #second column column A jogging
                GridLayout:
                    size_hint_x: .25
                    cols: 1
                    rows: 3
                    spacing: dp(8)
                    padding: 10


                    JogButton:
                        text: "A+"
                        on_release: root.controller.jog_with_speed("A{}".format(root.step_a.text), app.root.jog_speed)

                    #center
                    GridBoxLayout:
                        Label:
                        Spinner:
                            id: step_a
                            center: 0.5, 0.5
                            size: dp(33), dp(33)
                            size_hint: None, None
                            text: '10'
                            values: '10', '1', '0.1', '0.01', '0.005'
                        Label:

                    JogButton:
                        text: "A-"
                        on_release: root.controller.jog_with_speed("A-{}".format(root.step_a.text), app.root.jog_speed)


                #third column column Z jogging
                GridLayout:
                    size_hint_x: .25
                    cols: 1
                    rows: 3
                    spacing: dp(8)
                    padding: 10


                    JogButton:
                        text: "Z+"
                        on_release: root.controller.jog_with_speed("Z{}".format(root.step_z.text), app.root.jog_speed)

                    #center
                    GridBoxLayout:
                        Label:
                        Spinner:
                            id: step_z
                            center: 0.5, 0.5
                            size: dp(33), dp(33)
                            size_hint: None, None
                            text: '10'
                            values: '10', '1', '0.1', '0.01', '0.005'
                        Label:

                    JogButton:
                        text: "Z-"
                        on_release: root.controller.jog_with_speed("Z-{}".format(root.step_z.text), app.root.jog_speed)


        BoxLayout:
            spacing: '5dp'
            size_hint_y: None
            height: '40dp'
            Button:
                id: btn_close
                text: tr._('Close')
                on_release: root.dismiss()
